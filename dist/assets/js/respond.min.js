!function(e){"use strict";e.matchMedia=e.matchMedia||function(e,t){var n,a=e.documentElement,s=a.firstElementChild||a.firstChild,i=e.createElement("body"),r=e.createElement("div");return r.id="mq-test-1",r.style.cssText="position:absolute;top:-100em",i.style.background="none",i.appendChild(r),function(e){return r.innerHTML='&shy;<style media="'+e+'"> #mq-test-1 { width: 42px; }</style>',a.insertBefore(i,s),n=42===r.offsetWidth,a.removeChild(i),{matches:n,media:e}}}(e.document)}(this),function(e){"use strict";function t(){E(!0)}var n={};e.respond=n,n.update=function(){};var a=[],s=function(){var t=!1;try{t=new e.XMLHttpRequest}catch(n){t=new e.ActiveXObject("Microsoft.XMLHTTP")}return function(){return t}}(),i=function(e,t){var n=s();n&&(n.open("GET",e,!0),n.onreadystatechange=function(){4!==n.readyState||200!==n.status&&304!==n.status||t(n.responseText)},4!==n.readyState&&n.send(null))};if(n.ajax=i,n.queue=a,n.regex={media:/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi,keyframes:/@(?:\-(?:o|moz|webkit)\-)?keyframes[^\{]+\{(?:[^\{\}]*\{[^\}\{]*\})+[^\}]*\}/gi,urls:/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,findStyles:/@media *([^\{]+)\{([\S\s]+?)$/,only:/(only\s+)?([a-zA-Z]+)\s?/,minw:/\([\s]*min\-width\s*:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/,maxw:/\([\s]*max\-width\s*:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/},n.mediaQueriesSupported=e.matchMedia&&null!==e.matchMedia("only all")&&e.matchMedia("only all").matches,!n.mediaQueriesSupported){var r,o,l,m=e.document,d=m.documentElement,h=[],u=[],c=[],f={},p=30,y=m.getElementsByTagName("head")[0]||d,g=m.getElementsByTagName("base")[0],x=y.getElementsByTagName("link"),v=function(){var e,t=m.createElement("div"),n=m.body,a=d.style.fontSize,s=n&&n.style.fontSize,i=!1;return t.style.cssText="position:absolute;font-size:1em;width:1em",n||(n=i=m.createElement("body"),n.style.background="none"),d.style.fontSize="100%",n.style.fontSize="100%",n.appendChild(t),i&&d.insertBefore(n,d.firstChild),e=t.offsetWidth,i?d.removeChild(n):n.removeChild(t),d.style.fontSize=a,s&&(n.style.fontSize=s),e=l=parseFloat(e)},E=function(t){var n="clientWidth",a=d[n],s="CSS1Compat"===m.compatMode&&a||m.body[n]||a,i={},f=x[x.length-1],g=(new Date).getTime();if(t&&r&&p>g-r)return e.clearTimeout(o),void(o=e.setTimeout(E,p));r=g;for(var w in h)if(h.hasOwnProperty(w)){var S=h[w],T=S.minw,C=S.maxw,b=null===T,$=null===C,z="em";T&&(T=parseFloat(T)*(T.indexOf(z)>-1?l||v():1)),C&&(C=parseFloat(C)*(C.indexOf(z)>-1?l||v():1)),S.hasquery&&(b&&$||!(b||s>=T)||!($||C>=s))||(i[S.media]||(i[S.media]=[]),i[S.media].push(u[S.rules]))}for(var M in c)c.hasOwnProperty(M)&&c[M]&&c[M].parentNode===y&&y.removeChild(c[M]);c.length=0;for(var R in i)if(i.hasOwnProperty(R)){var O=m.createElement("style"),k=i[R].join("\n");O.type="text/css",O.media=R,y.insertBefore(O,f.nextSibling),O.styleSheet?O.styleSheet.cssText=k:O.appendChild(m.createTextNode(k)),c.push(O)}},w=function(e,t,a){var s=e.replace(n.regex.keyframes,"").match(n.regex.media),i=s&&s.length||0;t=t.substring(0,t.lastIndexOf("/"));var r=function(e){return e.replace(n.regex.urls,"$1"+t+"$2$3")},o=!i&&a;t.length&&(t+="/"),o&&(i=1);for(var l=0;i>l;l++){var m,d,c,f;o?(m=a,u.push(r(e))):(m=s[l].match(n.regex.findStyles)&&RegExp.$1,u.push(RegExp.$2&&r(RegExp.$2))),c=m.split(","),f=c.length;for(var p=0;f>p;p++)d=c[p],h.push({media:d.split("(")[0].match(n.regex.only)&&RegExp.$2||"all",rules:u.length-1,hasquery:d.indexOf("(")>-1,minw:d.match(n.regex.minw)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:d.match(n.regex.maxw)&&parseFloat(RegExp.$1)+(RegExp.$2||"")})}E()},S=function(){if(a.length){var t=a.shift();i(t.href,function(n){w(n,t.href,t.media),f[t.href]=!0,e.setTimeout(function(){S()},0)})}},T=function(){for(var t=0;t<x.length;t++){var n=x[t],s=n.href,i=n.media,r=n.rel&&"stylesheet"===n.rel.toLowerCase();s&&r&&!f[s]&&(n.styleSheet&&n.styleSheet.rawCssText?(w(n.styleSheet.rawCssText,s,i),f[s]=!0):(!/^([a-zA-Z:]*\/\/)/.test(s)&&!g||s.replace(RegExp.$1,"").split("/")[0]===e.location.host)&&("//"===s.substring(0,2)&&(s=e.location.protocol+s),a.push({href:s,media:i})))}S()};T(),n.update=T,n.getEmValue=v,e.addEventListener?e.addEventListener("resize",t,!1):e.attachEvent&&e.attachEvent("onresize",t)}}(this);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc3BvbmQuanMiXSwibmFtZXMiOlsidyIsIm1hdGNoTWVkaWEiLCJkb2MiLCJ1bmRlZmluZWQiLCJib29sIiwiZG9jRWxlbSIsImRvY3VtZW50RWxlbWVudCIsInJlZk5vZGUiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImZpcnN0Q2hpbGQiLCJmYWtlQm9keSIsImNyZWF0ZUVsZW1lbnQiLCJkaXYiLCJpZCIsInN0eWxlIiwiY3NzVGV4dCIsImJhY2tncm91bmQiLCJhcHBlbmRDaGlsZCIsInEiLCJpbm5lckhUTUwiLCJpbnNlcnRCZWZvcmUiLCJvZmZzZXRXaWR0aCIsInJlbW92ZUNoaWxkIiwibWF0Y2hlcyIsIm1lZGlhIiwiZG9jdW1lbnQiLCJ0aGlzIiwiY2FsbE1lZGlhIiwiYXBwbHlNZWRpYSIsInJlc3BvbmQiLCJ1cGRhdGUiLCJyZXF1ZXN0UXVldWUiLCJ4bWxIdHRwIiwieG1saHR0cG1ldGhvZCIsIlhNTEh0dHBSZXF1ZXN0IiwiZSIsIkFjdGl2ZVhPYmplY3QiLCJhamF4IiwidXJsIiwiY2FsbGJhY2siLCJyZXEiLCJvcGVuIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsInJlc3BvbnNlVGV4dCIsInNlbmQiLCJxdWV1ZSIsInJlZ2V4Iiwia2V5ZnJhbWVzIiwidXJscyIsImZpbmRTdHlsZXMiLCJvbmx5IiwibWludyIsIm1heHciLCJtZWRpYVF1ZXJpZXNTdXBwb3J0ZWQiLCJsYXN0Q2FsbCIsInJlc2l6ZURlZmVyIiwiZW1pbnB4IiwibWVkaWFzdHlsZXMiLCJydWxlcyIsImFwcGVuZGVkRWxzIiwicGFyc2VkU2hlZXRzIiwicmVzaXplVGhyb3R0bGUiLCJoZWFkIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJiYXNlIiwibGlua3MiLCJnZXRFbVZhbHVlIiwicmV0IiwiYm9keSIsIm9yaWdpbmFsSFRNTEZvbnRTaXplIiwiZm9udFNpemUiLCJvcmlnaW5hbEJvZHlGb250U2l6ZSIsImZha2VVc2VkIiwicGFyc2VGbG9hdCIsImZyb21SZXNpemUiLCJuYW1lIiwiZG9jRWxlbVByb3AiLCJjdXJyV2lkdGgiLCJjb21wYXRNb2RlIiwic3R5bGVCbG9ja3MiLCJsYXN0TGluayIsImxlbmd0aCIsIm5vdyIsIkRhdGUiLCJnZXRUaW1lIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsImkiLCJoYXNPd25Qcm9wZXJ0eSIsInRoaXNzdHlsZSIsIm1pbiIsIm1heCIsIm1pbm51bGwiLCJtYXhudWxsIiwiZW0iLCJpbmRleE9mIiwiaGFzcXVlcnkiLCJwdXNoIiwiaiIsInBhcmVudE5vZGUiLCJrIiwic3MiLCJjc3MiLCJqb2luIiwidHlwZSIsIm5leHRTaWJsaW5nIiwic3R5bGVTaGVldCIsImNyZWF0ZVRleHROb2RlIiwidHJhbnNsYXRlIiwic3R5bGVzIiwiaHJlZiIsInFzIiwicmVwbGFjZSIsIm1hdGNoIiwicWwiLCJzdWJzdHJpbmciLCJsYXN0SW5kZXhPZiIsInJlcFVybHMiLCJ1c2VNZWRpYSIsImZ1bGxxIiwidGhpc3EiLCJlYWNocSIsImVxbCIsIlJlZ0V4cCIsIiQxIiwiJDIiLCJzcGxpdCIsIm1ha2VSZXF1ZXN0cyIsInRoaXNSZXF1ZXN0Iiwic2hpZnQiLCJyaXBDU1MiLCJzaGVldCIsImlzQ1NTIiwicmVsIiwidG9Mb3dlckNhc2UiLCJyYXdDc3NUZXh0IiwidGVzdCIsImxvY2F0aW9uIiwiaG9zdCIsInByb3RvY29sIiwiYWRkRXZlbnRMaXN0ZW5lciIsImF0dGFjaEV2ZW50Il0sIm1hcHBpbmdzIjoiQ0FFQSxTQUFVQSxHQUNSLFlBQ0FBLEdBQUVDLFdBQWFELEVBQUVDLFlBQWMsU0FBU0MsRUFBS0MsR0FDM0MsR0FBSUMsR0FBTUMsRUFBVUgsRUFBSUksZ0JBQWlCQyxFQUFVRixFQUFRRyxtQkFBcUJILEVBQVFJLFdBQVlDLEVBQVdSLEVBQUlTLGNBQWMsUUFBU0MsRUFBTVYsRUFBSVMsY0FBYyxNQUtsSyxPQUpBQyxHQUFJQyxHQUFLLFlBQ1RELEVBQUlFLE1BQU1DLFFBQVUsK0JBQ3BCTCxF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QkFBaUIsU0FBVW5ILEdBQVcsR0FDL0IzQixFQUFFK0ksYUFDWC9JLEVBQUUrSSxZQUFZLFdBQVlwSCxLQUUzQkQiLCJmaWxlIjoicmVzcG9uZC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgbWF0Y2hNZWRpYSgpIHBvbHlmaWxsIC0gVGVzdCBhIENTUyBtZWRpYSB0eXBlL3F1ZXJ5IGluIEpTLiBBdXRob3JzICYgY29weXJpZ2h0IChjKSAyMDEyOiBTY290dCBKZWhsLCBQYXVsIElyaXNoLCBOaWNob2xhcyBaYWthcy4gRHVhbCBNSVQvQlNEIGxpY2Vuc2UgKi9cbi8qISBOT1RFOiBJZiB5b3UncmUgYWxyZWFkeSBpbmNsdWRpbmcgYSB3aW5kb3cubWF0Y2hNZWRpYSBwb2x5ZmlsbCB2aWEgTW9kZXJuaXpyIG9yIG90aGVyd2lzZSwgeW91IGRvbid0IG5lZWQgdGhpcyBwYXJ0ICovXG4oZnVuY3Rpb24odykge1xuICBcInVzZSBzdHJpY3RcIjtcbiAgdy5tYXRjaE1lZGlhID0gdy5tYXRjaE1lZGlhIHx8IGZ1bmN0aW9uKGRvYywgdW5kZWZpbmVkKSB7XG4gICAgdmFyIGJvb2wsIGRvY0VsZW0gPSBkb2MuZG9jdW1lbnRFbGVtZW50LCByZWZOb2RlID0gZG9jRWxlbS5maXJzdEVsZW1lbnRDaGlsZCB8fCBkb2NFbGVtLmZpcnN0Q2hpbGQsIGZha2VCb2R5ID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJib2R5XCIpLCBkaXYgPSBkb2MuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBkaXYuaWQgPSBcIm1xLXRlc3QtMVwiO1xuICAgIGRpdi5zdHlsZS5jc3NUZXh0ID0gXCJwb3NpdGlvbjphYnNvbHV0ZTt0b3A6LTEwMGVtXCI7XG4gICAgZmFrZUJvZHkuc3R5bGUuYmFja2dyb3VuZCA9IFwibm9uZVwiO1xuICAgIGZha2VCb2R5LmFwcGVuZENoaWxkKGRpdik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHEpIHtcbiAgICAgIGRpdi5pbm5lckhUTUwgPSAnJnNoeTs8c3R5bGUgbWVkaWE9XCInICsgcSArICdcIj4gI21xLXRlc3QtMSB7IHdpZHRoOiA0MnB4OyB9PC9zdHlsZT4nO1xuICAgICAgZG9jRWxlbS5pbnNlcnRCZWZvcmUoZmFrZUJvZHksIHJlZk5vZGUpO1xuICAgICAgYm9vbCA9IGRpdi5vZmZzZXRXaWR0aCA9PT0gNDI7XG4gICAgICBkb2NFbGVtLnJlbW92ZUNoaWxkKGZha2VCb2R5KTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG1hdGNoZXM6IGJvb2wsXG4gICAgICAgIG1lZGlhOiBxXG4gICAgICB9O1xuICAgIH07XG4gIH0ody5kb2N1bWVudCk7XG59KSh0aGlzKTtcblxuLyohIFJlc3BvbmQuanMgdjEuNC4wOiBtaW4vbWF4LXdpZHRoIG1lZGlhIHF1ZXJ5IHBvbHlmaWxsLiAoYykgU2NvdHQgSmVobC4gTUlUIExpYy4gai5tcC9yZXNwb25kanMgICovXG4oZnVuY3Rpb24odykge1xuICBcInVzZSBzdHJpY3RcIjtcbiAgdmFyIHJlc3BvbmQgPSB7fTtcbiAgdy5yZXNwb25kID0gcmVzcG9uZDtcbiAgcmVzcG9uZC51cGRhdGUgPSBmdW5jdGlvbigpIHt9O1xuICB2YXIgcmVxdWVzdFF1ZXVlID0gW10sIHhtbEh0dHAgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgeG1saHR0cG1ldGhvZCA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICB4bWxodHRwbWV0aG9kID0gbmV3IHcuWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB4bWxodHRwbWV0aG9kID0gbmV3IHcuQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxIVFRQXCIpO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4geG1saHR0cG1ldGhvZDtcbiAgICB9O1xuICB9KCksIGFqYXggPSBmdW5jdGlvbih1cmwsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHJlcSA9IHhtbEh0dHAoKTtcbiAgICBpZiAoIXJlcSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXEub3BlbihcIkdFVFwiLCB1cmwsIHRydWUpO1xuICAgIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChyZXEucmVhZHlTdGF0ZSAhPT0gNCB8fCByZXEuc3RhdHVzICE9PSAyMDAgJiYgcmVxLnN0YXR1cyAhPT0gMzA0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNhbGxiYWNrKHJlcS5yZXNwb25zZVRleHQpO1xuICAgIH07XG4gICAgaWYgKHJlcS5yZWFkeVN0YXRlID09PSA0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJlcS5zZW5kKG51bGwpO1xuICB9O1xuICByZXNwb25kLmFqYXggPSBhamF4O1xuICByZXNwb25kLnF1ZXVlID0gcmVxdWVzdFF1ZXVlO1xuICByZXNwb25kLnJlZ2V4ID0ge1xuICAgIG1lZGlhOiAvQG1lZGlhW15cXHtdK1xceyhbXlxce1xcfV0qXFx7W15cXH1cXHtdKlxcfSkrL2dpLFxuICAgIGtleWZyYW1lczogL0AoPzpcXC0oPzpvfG1venx3ZWJraXQpXFwtKT9rZXlmcmFtZXNbXlxce10rXFx7KD86W15cXHtcXH1dKlxce1teXFx9XFx7XSpcXH0pK1teXFx9XSpcXH0vZ2ksXG4gICAgdXJsczogLyh1cmxcXCgpWydcIl0/KFteXFwvXFwpJ1wiXVteOlxcKSdcIl0rKVsnXCJdPyhcXCkpL2csXG4gICAgZmluZFN0eWxlczogL0BtZWRpYSAqKFteXFx7XSspXFx7KFtcXFNcXHNdKz8pJC8sXG4gICAgb25seTogLyhvbmx5XFxzKyk/KFthLXpBLVpdKylcXHM/LyxcbiAgICBtaW53OiAvXFwoW1xcc10qbWluXFwtd2lkdGhcXHMqOltcXHNdKihbXFxzXSpbMC05XFwuXSspKHB4fGVtKVtcXHNdKlxcKS8sXG4gICAgbWF4dzogL1xcKFtcXHNdKm1heFxcLXdpZHRoXFxzKjpbXFxzXSooW1xcc10qWzAtOVxcLl0rKShweHxlbSlbXFxzXSpcXCkvXG4gIH07XG4gIHJlc3BvbmQubWVkaWFRdWVyaWVzU3VwcG9ydGVkID0gdy5tYXRjaE1lZGlhICYmIHcubWF0Y2hNZWRpYShcIm9ubHkgYWxsXCIpICE9PSBudWxsICYmIHcubWF0Y2hNZWRpYShcIm9ubHkgYWxsXCIpLm1hdGNoZXM7XG4gIGlmIChyZXNwb25kLm1lZGlhUXVlcmllc1N1cHBvcnRlZCkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgZG9jID0gdy5kb2N1bWVudCwgZG9jRWxlbSA9IGRvYy5kb2N1bWVudEVsZW1lbnQsIG1lZGlhc3R5bGVzID0gW10sIHJ1bGVzID0gW10sIGFwcGVuZGVkRWxzID0gW10sIHBhcnNlZFNoZWV0cyA9IHt9LCByZXNpemVUaHJvdHRsZSA9IDMwLCBoZWFkID0gZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXSB8fCBkb2NFbGVtLCBiYXNlID0gZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYmFzZVwiKVswXSwgbGlua3MgPSBoZWFkLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwibGlua1wiKSwgbGFzdENhbGwsIHJlc2l6ZURlZmVyLCBlbWlucHgsIGdldEVtVmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcmV0LCBkaXYgPSBkb2MuY3JlYXRlRWxlbWVudChcImRpdlwiKSwgYm9keSA9IGRvYy5ib2R5LCBvcmlnaW5hbEhUTUxGb250U2l6ZSA9IGRvY0VsZW0uc3R5bGUuZm9udFNpemUsIG9yaWdpbmFsQm9keUZvbnRTaXplID0gYm9keSAmJiBib2R5LnN0eWxlLmZvbnRTaXplLCBmYWtlVXNlZCA9IGZhbHNlO1xuICAgIGRpdi5zdHlsZS5jc3NUZXh0ID0gXCJwb3NpdGlvbjphYnNvbHV0ZTtmb250LXNpemU6MWVtO3dpZHRoOjFlbVwiO1xuICAgIGlmICghYm9keSkge1xuICAgICAgYm9keSA9IGZha2VVc2VkID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJib2R5XCIpO1xuICAgICAgYm9keS5zdHlsZS5iYWNrZ3JvdW5kID0gXCJub25lXCI7XG4gICAgfVxuICAgIGRvY0VsZW0uc3R5bGUuZm9udFNpemUgPSBcIjEwMCVcIjtcbiAgICBib2R5LnN0eWxlLmZvbnRTaXplID0gXCIxMDAlXCI7XG4gICAgYm9keS5hcHBlbmRDaGlsZChkaXYpO1xuICAgIGlmIChmYWtlVXNlZCkge1xuICAgICAgZG9jRWxlbS5pbnNlcnRCZWZvcmUoYm9keSwgZG9jRWxlbS5maXJzdENoaWxkKTtcbiAgICB9XG4gICAgcmV0ID0gZGl2Lm9mZnNldFdpZHRoO1xuICAgIGlmIChmYWtlVXNlZCkge1xuICAgICAgZG9jRWxlbS5yZW1vdmVDaGlsZChib2R5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgYm9keS5yZW1vdmVDaGlsZChkaXYpO1xuICAgIH1cbiAgICBkb2NFbGVtLnN0eWxlLmZvbnRTaXplID0gb3JpZ2luYWxIVE1MRm9udFNpemU7XG4gICAgaWYgKG9yaWdpbmFsQm9keUZvbnRTaXplKSB7XG4gICAgICBib2R5LnN0eWxlLmZvbnRTaXplID0gb3JpZ2luYWxCb2R5Rm9udFNpemU7XG4gICAgfVxuICAgIHJldCA9IGVtaW5weCA9IHBhcnNlRmxvYXQocmV0KTtcbiAgICByZXR1cm4gcmV0O1xuICB9LCBhcHBseU1lZGlhID0gZnVuY3Rpb24oZnJvbVJlc2l6ZSkge1xuICAgIHZhciBuYW1lID0gXCJjbGllbnRXaWR0aFwiLCBkb2NFbGVtUHJvcCA9IGRvY0VsZW1bbmFtZV0sIGN1cnJXaWR0aCA9IGRvYy5jb21wYXRNb2RlID09PSBcIkNTUzFDb21wYXRcIiAmJiBkb2NFbGVtUHJvcCB8fCBkb2MuYm9keVtuYW1lXSB8fCBkb2NFbGVtUHJvcCwgc3R5bGVCbG9ja3MgPSB7fSwgbGFzdExpbmsgPSBsaW5rc1tsaW5rcy5sZW5ndGggLSAxXSwgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgaWYgKGZyb21SZXNpemUgJiYgbGFzdENhbGwgJiYgbm93IC0gbGFzdENhbGwgPCByZXNpemVUaHJvdHRsZSkge1xuICAgICAgdy5jbGVhclRpbWVvdXQocmVzaXplRGVmZXIpO1xuICAgICAgcmVzaXplRGVmZXIgPSB3LnNldFRpbWVvdXQoYXBwbHlNZWRpYSwgcmVzaXplVGhyb3R0bGUpO1xuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSB7XG4gICAgICBsYXN0Q2FsbCA9IG5vdztcbiAgICB9XG4gICAgZm9yICh2YXIgaSBpbiBtZWRpYXN0eWxlcykge1xuICAgICAgaWYgKG1lZGlhc3R5bGVzLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgIHZhciB0aGlzc3R5bGUgPSBtZWRpYXN0eWxlc1tpXSwgbWluID0gdGhpc3N0eWxlLm1pbncsIG1heCA9IHRoaXNzdHlsZS5tYXh3LCBtaW5udWxsID0gbWluID09PSBudWxsLCBtYXhudWxsID0gbWF4ID09PSBudWxsLCBlbSA9IFwiZW1cIjtcbiAgICAgICAgaWYgKCEhbWluKSB7XG4gICAgICAgICAgbWluID0gcGFyc2VGbG9hdChtaW4pICogKG1pbi5pbmRleE9mKGVtKSA+IC0xID8gZW1pbnB4IHx8IGdldEVtVmFsdWUoKSA6IDEpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghIW1heCkge1xuICAgICAgICAgIG1heCA9IHBhcnNlRmxvYXQobWF4KSAqIChtYXguaW5kZXhPZihlbSkgPiAtMSA/IGVtaW5weCB8fCBnZXRFbVZhbHVlKCkgOiAxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXNzdHlsZS5oYXNxdWVyeSB8fCAoIW1pbm51bGwgfHwgIW1heG51bGwpICYmIChtaW5udWxsIHx8IGN1cnJXaWR0aCA+PSBtaW4pICYmIChtYXhudWxsIHx8IGN1cnJXaWR0aCA8PSBtYXgpKSB7XG4gICAgICAgICAgaWYgKCFzdHlsZUJsb2Nrc1t0aGlzc3R5bGUubWVkaWFdKSB7XG4gICAgICAgICAgICBzdHlsZUJsb2Nrc1t0aGlzc3R5bGUubWVkaWFdID0gW107XG4gICAgICAgICAgfVxuICAgICAgICAgIHN0eWxlQmxvY2tzW3RoaXNzdHlsZS5tZWRpYV0ucHVzaChydWxlc1t0aGlzc3R5bGUucnVsZXNdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBqIGluIGFwcGVuZGVkRWxzKSB7XG4gICAgICBpZiAoYXBwZW5kZWRFbHMuaGFzT3duUHJvcGVydHkoaikpIHtcbiAgICAgICAgaWYgKGFwcGVuZGVkRWxzW2pdICYmIGFwcGVuZGVkRWxzW2pdLnBhcmVudE5vZGUgPT09IGhlYWQpIHtcbiAgICAgICAgICBoZWFkLnJlbW92ZUNoaWxkKGFwcGVuZGVkRWxzW2pdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBhcHBlbmRlZEVscy5sZW5ndGggPSAwO1xuICAgIGZvciAodmFyIGsgaW4gc3R5bGVCbG9ja3MpIHtcbiAgICAgIGlmIChzdHlsZUJsb2Nrcy5oYXNPd25Qcm9wZXJ0eShrKSkge1xuICAgICAgICB2YXIgc3MgPSBkb2MuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpLCBjc3MgPSBzdHlsZUJsb2Nrc1trXS5qb2luKFwiXFxuXCIpO1xuICAgICAgICBzcy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuICAgICAgICBzcy5tZWRpYSA9IGs7XG4gICAgICAgIGhlYWQuaW5zZXJ0QmVmb3JlKHNzLCBsYXN0TGluay5uZXh0U2libGluZyk7XG4gICAgICAgIGlmIChzcy5zdHlsZVNoZWV0KSB7XG4gICAgICAgICAgc3Muc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNzLmFwcGVuZENoaWxkKGRvYy5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgICAgICAgfVxuICAgICAgICBhcHBlbmRlZEVscy5wdXNoKHNzKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHRyYW5zbGF0ZSA9IGZ1bmN0aW9uKHN0eWxlcywgaHJlZiwgbWVkaWEpIHtcbiAgICB2YXIgcXMgPSBzdHlsZXMucmVwbGFjZShyZXNwb25kLnJlZ2V4LmtleWZyYW1lcywgXCJcIikubWF0Y2gocmVzcG9uZC5yZWdleC5tZWRpYSksIHFsID0gcXMgJiYgcXMubGVuZ3RoIHx8IDA7XG4gICAgaHJlZiA9IGhyZWYuc3Vic3RyaW5nKDAsIGhyZWYubGFzdEluZGV4T2YoXCIvXCIpKTtcbiAgICB2YXIgcmVwVXJscyA9IGZ1bmN0aW9uKGNzcykge1xuICAgICAgcmV0dXJuIGNzcy5yZXBsYWNlKHJlc3BvbmQucmVnZXgudXJscywgXCIkMVwiICsgaHJlZiArIFwiJDIkM1wiKTtcbiAgICB9LCB1c2VNZWRpYSA9ICFxbCAmJiBtZWRpYTtcbiAgICBpZiAoaHJlZi5sZW5ndGgpIHtcbiAgICAgIGhyZWYgKz0gXCIvXCI7XG4gICAgfVxuICAgIGlmICh1c2VNZWRpYSkge1xuICAgICAgcWwgPSAxO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHFsOyBpKyspIHtcbiAgICAgIHZhciBmdWxscSwgdGhpc3EsIGVhY2hxLCBlcWw7XG4gICAgICBpZiAodXNlTWVkaWEpIHtcbiAgICAgICAgZnVsbHEgPSBtZWRpYTtcbiAgICAgICAgcnVsZXMucHVzaChyZXBVcmxzKHN0eWxlcykpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZnVsbHEgPSBxc1tpXS5tYXRjaChyZXNwb25kLnJlZ2V4LmZpbmRTdHlsZXMpICYmIFJlZ0V4cC4kMTtcbiAgICAgICAgcnVsZXMucHVzaChSZWdFeHAuJDIgJiYgcmVwVXJscyhSZWdFeHAuJDIpKTtcbiAgICAgIH1cbiAgICAgIGVhY2hxID0gZnVsbHEuc3BsaXQoXCIsXCIpO1xuICAgICAgZXFsID0gZWFjaHEubGVuZ3RoO1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBlcWw7IGorKykge1xuICAgICAgICB0aGlzcSA9IGVhY2hxW2pdO1xuICAgICAgICBtZWRpYXN0eWxlcy5wdXNoKHtcbiAgICAgICAgICBtZWRpYTogdGhpc3Euc3BsaXQoXCIoXCIpWzBdLm1hdGNoKHJlc3BvbmQucmVnZXgub25seSkgJiYgUmVnRXhwLiQyIHx8IFwiYWxsXCIsXG4gICAgICAgICAgcnVsZXM6IHJ1bGVzLmxlbmd0aCAtIDEsXG4gICAgICAgICAgaGFzcXVlcnk6IHRoaXNxLmluZGV4T2YoXCIoXCIpID4gLTEsXG4gICAgICAgICAgbWludzogdGhpc3EubWF0Y2gocmVzcG9uZC5yZWdleC5taW53KSAmJiBwYXJzZUZsb2F0KFJlZ0V4cC4kMSkgKyAoUmVnRXhwLiQyIHx8IFwiXCIpLFxuICAgICAgICAgIG1heHc6IHRoaXNxLm1hdGNoKHJlc3BvbmQucmVnZXgubWF4dykgJiYgcGFyc2VGbG9hdChSZWdFeHAuJDEpICsgKFJlZ0V4cC4kMiB8fCBcIlwiKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgYXBwbHlNZWRpYSgpO1xuICB9LCBtYWtlUmVxdWVzdHMgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAocmVxdWVzdFF1ZXVlLmxlbmd0aCkge1xuICAgICAgdmFyIHRoaXNSZXF1ZXN0ID0gcmVxdWVzdFF1ZXVlLnNoaWZ0KCk7XG4gICAgICBhamF4KHRoaXNSZXF1ZXN0LmhyZWYsIGZ1bmN0aW9uKHN0eWxlcykge1xuICAgICAgICB0cmFuc2xhdGUoc3R5bGVzLCB0aGlzUmVxdWVzdC5ocmVmLCB0aGlzUmVxdWVzdC5tZWRpYSk7XG4gICAgICAgIHBhcnNlZFNoZWV0c1t0aGlzUmVxdWVzdC5ocmVmXSA9IHRydWU7XG4gICAgICAgIHcuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBtYWtlUmVxdWVzdHMoKTtcbiAgICAgICAgfSwgMCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHJpcENTUyA9IGZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlua3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzaGVldCA9IGxpbmtzW2ldLCBocmVmID0gc2hlZXQuaHJlZiwgbWVkaWEgPSBzaGVldC5tZWRpYSwgaXNDU1MgPSBzaGVldC5yZWwgJiYgc2hlZXQucmVsLnRvTG93ZXJDYXNlKCkgPT09IFwic3R5bGVzaGVldFwiO1xuICAgICAgaWYgKCEhaHJlZiAmJiBpc0NTUyAmJiAhcGFyc2VkU2hlZXRzW2hyZWZdKSB7XG4gICAgICAgIGlmIChzaGVldC5zdHlsZVNoZWV0ICYmIHNoZWV0LnN0eWxlU2hlZXQucmF3Q3NzVGV4dCkge1xuICAgICAgICAgIHRyYW5zbGF0ZShzaGVldC5zdHlsZVNoZWV0LnJhd0Nzc1RleHQsIGhyZWYsIG1lZGlhKTtcbiAgICAgICAgICBwYXJzZWRTaGVldHNbaHJlZl0gPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICghL14oW2EtekEtWjpdKlxcL1xcLykvLnRlc3QoaHJlZikgJiYgIWJhc2UgfHwgaHJlZi5yZXBsYWNlKFJlZ0V4cC4kMSwgXCJcIikuc3BsaXQoXCIvXCIpWzBdID09PSB3LmxvY2F0aW9uLmhvc3QpIHtcbiAgICAgICAgICAgIGlmIChocmVmLnN1YnN0cmluZygwLCAyKSA9PT0gXCIvL1wiKSB7XG4gICAgICAgICAgICAgIGhyZWYgPSB3LmxvY2F0aW9uLnByb3RvY29sICsgaHJlZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcXVlc3RRdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgICAgaHJlZjogaHJlZixcbiAgICAgICAgICAgICAgbWVkaWE6IG1lZGlhXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgbWFrZVJlcXVlc3RzKCk7XG4gIH07XG4gIHJpcENTUygpO1xuICByZXNwb25kLnVwZGF0ZSA9IHJpcENTUztcbiAgcmVzcG9uZC5nZXRFbVZhbHVlID0gZ2V0RW1WYWx1ZTtcbiAgZnVuY3Rpb24gY2FsbE1lZGlhKCkge1xuICAgIGFwcGx5TWVkaWEodHJ1ZSk7XG4gIH1cbiAgaWYgKHcuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgIHcuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBjYWxsTWVkaWEsIGZhbHNlKTtcbiAgfSBlbHNlIGlmICh3LmF0dGFjaEV2ZW50KSB7XG4gICAgdy5hdHRhY2hFdmVudChcIm9ucmVzaXplXCIsIGNhbGxNZWRpYSk7XG4gIH1cbn0pKHRoaXMpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9